# Cotor 개선 사항

## 사용 테스트 결과

### ✅ 잘 작동하는 기능
1. **기본 파이프라인 실행** - Sequential, DAG 모드 모두 정상 작동
2. **실시간 모니터링** - 진행 상황 표시가 직관적
3. **AI 통합** - Claude와의 통합이 원활함
4. **타임라인 추적** - 각 스테이지의 실행 시간 추적 가능
5. **에러 핸들링** - 기본적인 에러 처리 잘 됨

### 🔧 개선이 필요한 부분

#### 1. **중복 출력 문제** (🔴 High Priority)
**문제**: 실행 중 동일한 progress bar가 여러 번 출력됨
```
🚀 Running: codex-dag (4 stages)
🚀 Running: codex-dag (4 stages)  # 중복
🚀 Running: codex-dag (4 stages)  # 중복
```

**원인**: 모니터링 이벤트가 여러 번 발생하면서 동일한 출력 반복

**해결책**:
- 출력 상태를 추적하여 중복 방지
- 마지막 출력과 동일한 경우 건너뛰기
- 진행률이 변경될 때만 업데이트

#### 2. **긴 실행 시간에 대한 피드백 부족** (🟡 Medium Priority)
**문제**: 7초 동안 실행될 때 진행 상황을 알 수 없음

**해결책**:
- AI 응답 대기 중 애니메이션 추가 (spinner, dots)
- 예상 소요 시간 표시
- 타임아웃까지 남은 시간 표시

#### 3. **Pipeline Resume 기능 없음** (🟡 Medium Priority)
**문제**: 파이프라인 실행 중 실패 시 처음부터 다시 시작해야 함

**해결책**:
- 각 스테이지 완료 시 체크포인트 저장
- `--resume <run-id>` 옵션으로 이어서 실행
- 실패한 스테이지부터 재시작

#### 4. **Dry-run 시간 예측 부정확** (🟢 Low Priority)
**문제**: dry-run이 실제 실행 시간과 차이가 큼

**해결책**:
- 과거 실행 기록 기반 예측
- AI별 평균 응답 시간 학습
- 입력 크기에 따른 동적 예측

#### 5. **에러 메시지 개선 필요** (🟡 Medium Priority)
**문제**: 에러 발생 시 해결 방법이 명확하지 않음

**해결책**:
- 일반적인 에러에 대한 해결 가이드 제공
- 설정 파일 오류 시 정확한 라인 번호와 문제점 표시
- 권장 조치사항 포함

#### 6. **Pipeline 템플릿 생성 기능 없음** (🟢 Low Priority)
**문제**: 매번 YAML을 처음부터 작성해야 함

**해결책**:
- `cotor template <type> <name>` 커맨드 추가
- 일반적인 패턴에 대한 템플릿 제공
  - `compare`: 여러 AI 비교
  - `chain`: 순차적 처리
  - `review`: 코드 리뷰
  - `consensus`: 합의 도출

#### 7. **출력 포맷 일관성 부족** (🟢 Low Priority)
**문제**: 다양한 출력이 섞여 있어 파싱하기 어려움

**해결책**:
- `--quiet` 모드: 최종 결과만 출력
- `--json-only` 모드: JSON만 출력
- `--format structured`: 구조화된 출력

#### 8. **파이프라인 비교 기능 없음** (🟢 Low Priority)
**문제**: 여러 파이프라인 결과를 비교하기 어려움

**해결책**:
- `cotor compare <run-id1> <run-id2>` 커맨드
- 실행 시간, 성공률, 출력 차이 비교
- 시각적 diff 제공

## 우선순위별 구현 계획

### Phase 1: 즉시 개선 (🔴 High Priority)
1. ✅ 중복 출력 제거
2. ✅ 에러 메시지 개선

### Phase 2: 사용성 개선 (🟡 Medium Priority)
3. ✅ 긴 실행 대기 피드백
4. ✅ Pipeline Resume 기능
5. ✅ 템플릿 생성 기능

### Phase 3: 고급 기능 (🟢 Low Priority)
6. Dry-run 정확도 향상
7. 출력 포맷 옵션 추가
8. 파이프라인 비교 기능

## 추가 아이디어

### 1. **인터랙티브 모드**
```bash
cotor interactive
> Select pipeline: [list of pipelines]
> Modify input? [y/n]
> Execute [y/n]
```

### 2. **파이프라인 디버그 모드**
```bash
cotor debug <pipeline-name>
# 각 스테이지 후 일시정지
# 출력 확인 후 계속 여부 선택
```

### 3. **파이프라인 통계**
```bash
cotor stats <pipeline-name>
# 평균 실행 시간
# 성공률
# 가장 느린 스테이지
# AI별 성능 비교
```

### 4. **설정 검증 개선**
```bash
cotor validate <config>
# 더 자세한 검증 메시지
# 권장사항 제공
# 성능 최적화 팁
```

### 5. **웹 UI 개선**
- 실행 중인 파이프라인 실시간 모니터링
- 과거 실행 기록 브라우징
- 파이프라인 시각화 (DAG 그래프)
- 설정 편집기

## 테스트 계획

### 단위 테스트
- [ ] 중복 출력 제거 로직
- [ ] Resume 기능
- [ ] 템플릿 생성

### 통합 테스트
- [ ] 전체 파이프라인 실행
- [ ] Resume 후 재실행
- [ ] 다양한 출력 포맷

### 성능 테스트
- [ ] 대규모 파이프라인 (10+ stages)
- [ ] 병렬 실행 (10+ concurrent agents)
- [ ] 장시간 실행 (1시간+)
