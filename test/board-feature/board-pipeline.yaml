version: "1.0"

# 게시판 기능 구현을 위한 AI 에이전트
agents:
  - name: claude
    pluginClass: com.cotor.data.plugin.ClaudePlugin
    timeout: 240000
    tags:
      - backend
      - design

  - name: gemini
    pluginClass: com.cotor.data.plugin.GeminiPlugin
    timeout: 240000
    tags:
      - review
      - testing

pipelines:
  - name: board-implementation
    description: "게시판 CRUD 기능 구현 파이프라인"
    executionMode: SEQUENTIAL
    stages:
      # 1단계: 요구사항 분석 및 설계
      - id: requirements-analysis
        agent:
          name: claude
        input: |
          게시판 기능의 요구사항을 분석하고 설계해주세요.
          
          필수 기능:
          - 게시글 작성 (Create)
          - 게시글 목록 조회 (Read - List)
          - 게시글 상세 조회 (Read - Detail)
          - 게시글 수정 (Update)
          - 게시글 삭제 (Delete)
          
          다음 내용을 포함해주세요:
          1. 데이터베이스 스키마 설계 (테이블 구조)
          2. REST API 엔드포인트 설계
          3. 주요 비즈니스 로직
          
          결과를 requirements.md 파일로 작성해주세요.

      # 2단계: 백엔드 구현
      - id: backend-implementation
        agent:
          name: claude
        input: |
          위의 설계를 바탕으로 게시판 백엔드를 구현해주세요.
          
          구현 내용:
          1. Entity 클래스 (Board.kt)
          2. Repository 인터페이스 (BoardRepository.kt)
          3. Service 클래스 (BoardService.kt)
          4. Controller 클래스 (BoardController.kt)
          
          기술 스택: Kotlin + Spring Boot + JPA
          
          각 파일을 생성하고 주석으로 설명을 추가해주세요.

      # 3단계: 코드 리뷰 및 개선
      - id: code-review
        agent:
          name: gemini
        input: |
          위에서 구현된 게시판 백엔드 코드를 리뷰해주세요.
          
          리뷰 항목:
          1. 코드 품질 (가독성, 유지보수성)
          2. 보안 취약점 (SQL Injection, XSS 등)
          3. 성능 최적화 가능성
          4. 에러 처리
          5. 테스트 가능성
          
          개선 사항을 code-review.md 파일로 작성해주세요.

      # 4단계: 테스트 코드 작성
      - id: testing
        agent:
          name: gemini
        input: |
          게시판 기능에 대한 테스트 코드를 작성해주세요.
          
          테스트 종류:
          1. 단위 테스트 (Service 레이어)
          2. 통합 테스트 (Controller + Service + Repository)
          3. API 테스트 (REST API 엔드포인트)
          
          JUnit 5와 MockK를 사용해주세요.
          
          테스트 파일:
          - BoardServiceTest.kt
          - BoardControllerTest.kt
          - BoardApiTest.kt

      # 5단계: 문서화
      - id: documentation
        agent:
          name: claude
        input: |
          게시판 기능에 대한 종합 문서를 작성해주세요.
          
          문서 내용:
          1. API 문서 (엔드포인트, 요청/응답 예시)
          2. 데이터베이스 스키마
          3. 설치 및 실행 방법
          4. 테스트 실행 방법
          5. 알려진 이슈 및 제한사항
          
          README.md 파일로 작성해주세요.

# 보안 설정
security:
  useWhitelist: true
  allowedExecutables:
    - claude
    - gemini
  allowedDirectories:
    - /usr/local/bin
    - /opt/homebrew/bin

# 로깅 설정
logging:
  level: INFO
  file: board-pipeline.log
  format: json

# 성능 설정
performance:
  maxConcurrentAgents: 5
  coroutinePoolSize: 4
