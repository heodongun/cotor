version: "1.0"

# 순차 실행 체인 테스트 (생성 → 리뷰 → 개선)
agents:
  - name: claude
    pluginClass: com.cotor.data.plugin.ClaudePlugin
    timeout: 90000

  - name: gemini
    pluginClass: com.cotor.data.plugin.GeminiPlugin
    timeout: 90000

pipelines:
  - name: sequential-chain
    description: "생성 → 리뷰 → 개선 순차 체인"
    executionMode: SEQUENTIAL
    stages:
      # 1단계: 초기 구현
      - id: initial-implementation
        agent:
          name: claude
        input: |
          퀵소트 알고리즘을 Python으로 구현해주세요.

          요구사항:
          - 함수명: quick_sort
          - 입력: 정수 리스트
          - 출력: 정렬된 리스트
          - 재귀 방식 사용

          파일로 저장: test-claude/experiments/03-sequential/quick_sort_v1.py

      # 2단계: 코드 리뷰
      - id: code-review
        agent:
          name: gemini
        input: |
          위에서 생성된 퀵소트 코드를 리뷰해주세요.

          리뷰 항목:
          1. 코드 정확성
          2. 성능 최적화 가능성
          3. 가독성
          4. 엣지 케이스 처리

          개선 제안을 구체적으로 작성해주세요.

          리뷰 결과를 파일로 저장: test-claude/experiments/03-sequential/review.md

      # 3단계: 개선된 구현
      - id: improved-implementation
        agent:
          name: claude
        input: |
          위의 리뷰 피드백을 반영하여 퀵소트를 개선해주세요.

          - 리뷰에서 지적된 문제점 수정
          - 제안된 최적화 적용
          - 엣지 케이스 처리 추가

          파일로 저장: test-claude/experiments/03-sequential/quick_sort_v2.py

security:
  useWhitelist: true
  allowedExecutables:
    - claude
    - gemini
  allowedDirectories:
    - /usr/local/bin
    - /opt/homebrew/bin

logging:
  level: INFO
  file: sequential-test.log
